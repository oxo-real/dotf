# vim: filetype=neomuttrc

# general config settings for neomutt
## this main_config is called by the account_config
## account specific settings are in: ./<provider_name>/<account_name>/account_config
## configs for colors, key bindings and macros are sourced at the end of this file
## for help man neomuttrc

## basic config
set wait_key =			no  ## mutt won't ask "press key to continue"
set timeout =			3   ## abort waiting for input
set mail_check =		0   ## time between mail checks
set delete =			yes ## delete marked messages purged automatically
set quit =			yes ## direct quit without confirmation
set thorough_search =		yes ## decode headers, body & attachments
set mail_check_stats =		yes ## periodically calculate mailbox statistics
set mail_check_stats_interval =	60  ## interval, when $mail_check_stats is set
set confirmappend =		no  ## when adding messages to existing mailbox
set move =			no  ## move messages from spool mailbox to $mbox or mbox-hook
set mark_old =			no  ## tag unread messages old when exit mailbox
set beep_new =			no  ## stay silent on new mail
set sleep_time =		0   ## Pause 0 seconds for informational messages
auto_view text/plain
auto_view text/html

## compose config
set edit_headers =	yes ## edit header on compose
set fast_reply =	yes ## skip to compose when replying
set askcc =		yes ## ask for cc on compose
set fcc_attach =	yes ## save attachments with the body
set forward_format =	"Fw: %s"	## forward subject format
set forward_decode =	yes ## decode on forward
set attribution =	"?\n\n_______________________________________________________\n%{%A %d %B %Y %T %z %s},\n%n <%a> sent %c bytes:\n"	## forward quote format
#[TODO] %Z should give timezone name or abbreviation
set reply_to =		yes ## reply to 'Reply to:' field
set reverse_name =	yes ## reply as whomever it was to
set include =		yes ## include message in replies
set forward_quote =	yes ## include message in forwards
set text_flowed =	yes ## if yes; $indent_string is ignored
set sig_dashes =	yes ## "--  \n" is used to detect your signature
set mime_forward =	no  ## a copy of the forwarded message will be included
			    ## forwarded message attached as separate message


set editor =		'/usr/bin/nvim + -c	"set textwidth=80" -c "set wrap"'

## status bar config
set status_on_top =	yes ## status bar on first line
set status_chars =	" *%A"
set status_format =	"[ %f ] [ %r%m%?n? total;? %n new%?d? %d to delete?%?t? %t tagged? %?p? %p postponed ? ]"

## date and index config
set date_format =	"%Y%m%d_%H%M%S"
set index_format =	"%2C %zs %?X?A& ? %D %-15.15F %s (%-4.4c)"
#set index_format =	"[%Z] %?X?A&-? %D  %-20.20F  %s"

## sorting and jumping
set sort =		'reverse-date'
set sort_aux =		'reverse-last-date-received'	## when $sort is equal
set uncollapse_jump =	yes ## goto next unread message
set sort_re =		yes ## mailboxes in sidebar
set reply_regex =	"^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
set quote_regex =	"^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
set send_charset =	'utf-8:iso-8859-1:us-ascii'
set charset =		'utf-8'

## query_command (tab)
#set query_command =	"abook --mutt-query '%s'"
set query_command =	"notmuch address \
			    --output=recipients \
			    --deduplicate=address \
			    date:2021.. \
			    "%s" | \
			    fzf -m"

set query_format =	"%4c %t %-70.70a %-70.70n %?e?(%e)?"

## pager config
set pager_index_lines =	0   ## index collapses to # line(s) when pager opens
set pager_context =	3   ## show # surrounding lines in pager and search
set pager_stop =	yes ## stop at end of message and don't go to next message
set menu_scroll =	yes ## unset when there are many redraws
set tilde =		yes ## pad blank lines with tilde
set markers =		no  ## show + at beginning of wrapped lines

## headers and attachment config
ignore *				    ## ignore all headers in pager
unignore from: to: cc: bcc: date: subject:  ## but do show these headers in pager
unhdr_order *				    ## clear all previous headers from order list
hdr_order from: to: cc: bcc: date: subject: ## and present these headers in pager

## sidebar config
set sidebar_visible =	    no		## wheater to show the sidebar
#set sidebar_visible =	    yes		## wheater to show the sidebar
set sidebar_on_right =	    yes		## show sidebar on right-hand side of screen
set sidebar_short_path =    yes		## show mailbox path relative to $folder
set sidebar_sort_method =   unsorted	## path/count/flagged/new/unread/unsorted
set sidebar_folder_indent = yes		## indent mailboxes in sidebar
set sidebar_width =	    24	        ## char width of sidebar
set sidebar_divider_char =  ' | '	## sidebar visual divider
set sidebar_indent_string = '  ''	## sidebar indent string
set sidebar_format =	    "%B %* [%?N?%N/?%S]"    ## customized sidebar display
set sidebar_next_new_wrap = yes		## wrap around sidebar list

source $XDG_CONFIG_HOME/neomutt/color_config
source $XDG_CONFIG_HOME/neomutt/gpg_config
source $XDG_CONFIG_HOME/neomutt/key_config
